{% extends "base.html" %}

{% block title %}Configuration - YouTube Automation{% endblock %}

{% block page_title %}Settings{% endblock %}

{% block content %}
<!-- Configuration Status Checklist -->
<div class="card mb-4" style="border-left: 4px solid var(--primary);">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>
            <i class="bi bi-check2-square"></i> Configuration Status
        </div>
        <span class="badge bg-{{ 'success' if config_complete else 'warning' }}">
            {{ 'Complete' if config_complete else 'Incomplete' }}
        </span>
    </div>
    <div class="card-body">
        <div class="config-checklist">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="mb-3"><i class="bi bi-youtube text-danger"></i> YouTube</h6>
                    <div class="checklist-item {{ 'completed' if youtube_status.client_secret_exists else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if youtube_status.client_secret_exists else 'circle text-muted' }}"></i>
                        <span>Client Secret File</span>
                        {% if youtube_status.client_secret_exists %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-6">
                    <h6 class="mb-3"><i class="bi bi-linkedin text-primary"></i> LinkedIn</h6>
                    <div class="checklist-item {{ 'completed' if settings.api_keys.linkedin_client_id and settings.api_keys.linkedin_client_secret else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.api_keys.linkedin_client_id and settings.api_keys.linkedin_client_secret else 'circle text-muted' }}"></i>
                        <span>Client ID & Secret</span>
                        {% if settings.api_keys.linkedin_client_id and settings.api_keys.linkedin_client_secret %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                    <div class="checklist-item {{ 'completed' if settings.api_keys.linkedin_person_urn else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.api_keys.linkedin_person_urn else 'circle text-muted' }}"></i>
                        <span>Person URN</span>
                        {% if settings.api_keys.linkedin_person_urn %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <h6 class="mb-3"><i class="bi bi-facebook text-primary"></i> Facebook</h6>
                    <div class="checklist-item {{ 'completed' if settings.api_keys.facebook_app_id and settings.api_keys.facebook_app_secret else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.api_keys.facebook_app_id and settings.api_keys.facebook_app_secret else 'circle text-muted' }}"></i>
                        <span>App ID & Secret</span>
                        {% if settings.api_keys.facebook_app_id and settings.api_keys.facebook_app_secret %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                    <div class="checklist-item {{ 'completed' if settings.api_keys.facebook_page_id else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.api_keys.facebook_page_id else 'circle text-muted' }}"></i>
                        <span>Page ID</span>
                        {% if settings.api_keys.facebook_page_id %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-6">
                    <h6 class="mb-3"><i class="bi bi-instagram text-danger"></i> Instagram</h6>
                    <div class="checklist-item {{ 'completed' if settings.api_keys.instagram_business_account_id else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.api_keys.instagram_business_account_id else 'circle text-muted' }}"></i>
                        <span>Business Account ID</span>
                        {% if settings.api_keys.instagram_business_account_id %}
                        <span class="badge bg-success ms-2">Configured</span>
                        {% else %}
                        <span class="badge bg-warning ms-2">Pending</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <h6 class="mb-3"><i class="bi bi-calendar-event"></i> Scheduling</h6>
                    <div class="checklist-item {{ 'completed' if settings.scheduling.enabled else 'pending' }}">
                        <i class="bi bi-{{ 'check-circle-fill text-success' if settings.scheduling.enabled else 'circle text-muted' }}"></i>
                        <span>Automation Enabled</span>
                        {% if settings.scheduling.enabled %}
                        <span class="badge bg-success ms-2">Active</span>
                        {% else %}
                        <span class="badge bg-secondary ms-2">Disabled</span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<form method="POST" action="/config" id="configForm">
    <!-- Quick Load Config -->
    <div class="card mb-4" style="border-left: 4px solid var(--success);">
        <div class="card-header">
            <i class="bi bi-upload"></i> Quick Load Configuration
        </div>
        <div class="card-body">
            <p class="text-muted mb-3">Have a <code>MY_CONFIG.json</code> file? Load all settings at once!</p>
            <button type="button" class="btn btn-success" onclick="loadConfigFromFile()">
                <i class="bi bi-upload"></i> Load from MY_CONFIG.json
            </button>
            <small class="text-muted d-block mt-2">
                Create <code>MY_CONFIG.json</code> in the project root with all your settings. See <code>LOAD_CONFIG.md</code> for format.
            </small>
        </div>
    </div>

    <!-- YouTube API Configuration -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-youtube"></i> YouTube API Configuration
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label class="form-label">
                    Client Secret File
                    <span class="help-icon" onclick="showHelp('youtube-client-secret')" title="Help">?</span>
                </label>
                <div class="youtube-status mb-3">
                    {% if youtube_status.client_secret_exists %}
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i>
                        Client secret file is configured
                    </div>
                    {% if youtube_status.configured and youtube_status.channel_name %}
                    <div class="alert alert-info">
                        <i class="bi bi-broadcast"></i>
                        Connected to channel: <strong>{{ youtube_status.channel_name }}</strong>
                        {% if youtube_status.channel_id %}
                        <br><small>Channel ID: {{ youtube_status.channel_id }}</small>
                        {% endif %}
                    </div>
                    {% endif %}
                    {% else %}
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        Client secret file not found. Please upload your client_secret.json file.
                    </div>
                    {% endif %}
                    {% if youtube_status.error %}
                    <div class="alert alert-danger">
                        <i class="bi bi-x-circle"></i>
                        Error: {{ youtube_status.error }}
                    </div>
                    {% endif %}
                </div>
                <div class="file-upload-area">
                    <form id="clientSecretUploadForm" enctype="multipart/form-data">
                        <div class="input-group">
                            <input type="file" class="form-control" id="clientSecretFile" accept=".json" required>
                            <button class="btn btn-primary" type="submit" id="uploadClientSecretBtn">
                                <i class="bi bi-upload"></i> Upload
                            </button>
                        </div>
                        <small class="text-muted">
                            Upload your client_secret.json file from Google Cloud Console.
                            <a href="/docs#youtube-setup" target="_blank">Learn how to get it</a>
                        </small>
                    </form>
                    <div id="uploadStatus" class="mt-2" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- API Keys Section -->
    <div class="card" id="linkedin">
        <div class="card-header">
            <i class="bi bi-key"></i> API Keys & Credentials
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Client ID
                        <span class="help-icon" onclick="showHelp('linkedin-client-id')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="linkedin_client_id"
                        value="{{ settings.api_keys.linkedin_client_id }}" placeholder="Enter LinkedIn Client ID">
                    <small class="text-muted">Get from LinkedIn Developer Portal → App → Auth tab</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Client Secret
                        <span class="help-icon" onclick="showHelp('linkedin-client-secret')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="linkedin_client_secret"
                        value="{{ settings.api_keys.linkedin_client_secret }}"
                        placeholder="Enter LinkedIn Client Secret">
                    <small class="text-muted">Get from LinkedIn Developer Portal → App → Auth tab</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Access Token (Optional)
                        <span class="help-icon" onclick="showHelp('linkedin-access-token')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="linkedin_access_token"
                        value="{{ settings.api_keys.linkedin_access_token }}"
                        placeholder="Enter LinkedIn access token (optional)">
                    <small class="text-muted">Optional: If you already have an access token, you can use it
                        directly</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Person URN
                        <span class="help-icon" onclick="showHelp('linkedin-person-urn')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="linkedin_person_urn"
                        value="{{ settings.api_keys.linkedin_person_urn }}" placeholder="urn:li:person:xxxxx">
                    <small class="text-muted">Format: urn:li:person:xxxxx (required for posting)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook App ID
                        <span class="help-icon" onclick="showHelp('facebook-app-id')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="facebook_app_id"
                        value="{{ settings.api_keys.facebook_app_id }}" placeholder="Enter Facebook App ID">
                    <small class="text-muted">Get from Facebook Developers → App → Settings</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook App Secret
                        <span class="help-icon" onclick="showHelp('facebook-app-secret')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="facebook_app_secret"
                        value="{{ settings.api_keys.facebook_app_secret }}" placeholder="Enter Facebook App Secret">
                    <small class="text-muted">Get from Facebook Developers → App → Settings</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook Page Access Token (Optional)
                        <span class="help-icon" onclick="showHelp('facebook-page-token')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="facebook_page_access_token"
                        value="{{ settings.api_keys.facebook_page_access_token }}"
                        placeholder="Enter Facebook page access token (optional)">
                    <small class="text-muted">Optional: If you already have a page access token, you can use it
                        directly</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook Page ID
                        <span class="help-icon" onclick="showHelp('facebook-page-id')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="facebook_page_id"
                        value="{{ settings.api_keys.facebook_page_id }}" placeholder="Enter Facebook page ID">
                    <small class="text-muted">Required: Your Facebook Page ID (found in Page Settings)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Instagram Business Account ID
                        <span class="help-icon" onclick="showHelp('instagram-account-id')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="instagram_business_account_id"
                        value="{{ settings.api_keys.instagram_business_account_id }}"
                        placeholder="Enter Instagram business account ID">
                    <small class="text-muted">Get from Facebook Page → Instagram → Business Account ID</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Instagram Access Token (Optional)
                        <span class="help-icon" onclick="showHelp('instagram-access-token')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="instagram_access_token"
                        value="{{ settings.api_keys.instagram_access_token }}"
                        placeholder="Enter Instagram access token (optional)">
                    <small class="text-muted">Optional: If you already have an access token, you can use it directly.
                        Otherwise, use Facebook App ID/Secret above.</small>
                </div>
                <div class="col-md-12 mb-3">
                    <label class="form-label">
                        Ayrshare API Key (Alternative)
                        <span class="help-icon" onclick="showHelp('ayrshare-api-key')" title="Help">?</span>
                    </label>
                    <input type="password" class="form-control" name="ayrshare_api_key"
                        value="{{ settings.api_keys.ayrshare_api_key }}"
                        placeholder="Enter Ayrshare API key (optional)">
                    <small class="text-muted">Use Ayrshare for simpler unified API access. Sign up at
                        ayrshare.com</small>
                </div>
            </div>
            <div class="mt-3 d-flex justify-content-between align-items-center">
                <button type="button" class="btn btn-outline-secondary" onclick="testConnections()">
                    <i class="bi bi-check-circle"></i> Test Connections
                </button>
                <button type="button" class="btn btn-primary" onclick="saveSection('api_keys', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save API Keys</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Scheduling Section -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-calendar-event"></i> Scheduling Settings
        </div>
        <div class="card-body">
            <div class="mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="scheduling_enabled" id="scheduling_enabled"
                        {{ 'checked' if settings.scheduling.enabled else '' }}>
                    <label class="form-check-label" for="scheduling_enabled">
                        <strong>Enable Daily Automation</strong>
                    </label>
                </div>
                <small class="text-muted">When enabled, automation runs automatically according to schedule</small>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Videos Per Day
                        <span class="help-icon" onclick="showHelp('videos-per-day')" title="Help">?</span>
                    </label>
                    <input type="number" class="form-control" name="videos_per_day"
                        value="{{ settings.scheduling.videos_per_day }}" min="1" max="10">
                    <small class="text-muted">Number of videos to process per day</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Schedule Day
                        <span class="help-icon" onclick="showHelp('schedule-day')" title="Help">?</span>
                    </label>
                    <select class="form-select" name="schedule_day">
                        <option value="monday" {{ 'selected' if settings.scheduling.schedule_day=='monday' else '' }}>
                            Monday</option>
                        <option value="tuesday" {{ 'selected' if settings.scheduling.schedule_day=='tuesday' else '' }}>
                            Tuesday</option>
                        <option value="wednesday" {{ 'selected' if settings.scheduling.schedule_day=='wednesday' else ''
                            }}>Wednesday</option>
                        <option value="thursday" {{ 'selected' if settings.scheduling.schedule_day=='thursday' else ''
                            }}>Thursday</option>
                        <option value="friday" {{ 'selected' if settings.scheduling.schedule_day=='friday' else '' }}>
                            Friday</option>
                        <option value="saturday" {{ 'selected' if settings.scheduling.schedule_day=='saturday' else ''
                            }}>Saturday</option>
                        <option value="sunday" {{ 'selected' if settings.scheduling.schedule_day=='sunday' else '' }}>
                            Sunday</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        YouTube Schedule Time (IST)
                        <span class="help-icon" onclick="showHelp('youtube-schedule-time')" title="Help">?</span>
                    </label>
                    <input type="time" class="form-control" name="youtube_schedule_time"
                        value="{{ settings.scheduling.youtube_schedule_time }}">
                    <small class="text-muted">Time to schedule YouTube videos (default: 23:00 = 11:00 PM)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Social Media Schedule Time (IST)
                        <span class="help-icon" onclick="showHelp('social-media-schedule-time')" title="Help">?</span>
                    </label>
                    <input type="time" class="form-control" name="social_media_schedule_time"
                        value="{{ settings.scheduling.social_media_schedule_time }}">
                    <small class="text-muted">Time to post on social media (default: 19:30 = 7:30 PM)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        YouTube Playlist ID
                        <span class="help-icon" onclick="showHelp('youtube-playlist-id')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="playlist_id"
                        value="{{ settings.scheduling.playlist_id }}" placeholder="PLxxxx...">
                    <small class="text-muted">Playlist ID for video scheduling (optional)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Export Type
                        <span class="help-icon" onclick="showHelp('export-type')" title="Help">?</span>
                    </label>
                    <select class="form-select" name="export_type">
                        <option value="shorts" {{ 'selected' if settings.scheduling.export_type=='shorts' else '' }}>
                            Shorts Only</option>
                        <option value="all" {{ 'selected' if settings.scheduling.export_type=='all' else '' }}>All
                            Playlists</option>
                    </select>
                </div>
                <div class="col-md-12 mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="use_database" id="use_database"
                            {{ 'checked' if settings.scheduling.get('use_database', True) else '' }}>
                        <label class="form-check-label" for="use_database">
                            <strong>Use SQLite Database (Recommended)</strong>
                        </label>
                    </div>
                    <small class="text-muted">
                        ✅ Database is faster, supports concurrent access, and is better for automation.
                        You can still export to Excel for manual review anytime.
                    </small>
                </div>
            </div>
            <div class="mt-3 d-flex justify-content-end align-items-center gap-2">
                <small class="text-muted" style="font-size: 11px;">
                    <i class="bi bi-lightning-charge"></i> Auto-saves after 2 seconds
                </small>
                <button type="button" class="btn btn-primary section-save-btn" onclick="saveSection('scheduling', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save Scheduling Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Social Media Posting Section -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-share"></i> Social Media Posting
        </div>
        <div class="card-body">
            <div class="mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="auto_post_social" id="auto_post_social"
                        {{ 'checked' if settings.scheduling.auto_post_social else '' }}>
                    <label class="form-check-label" for="auto_post_social">
                        <strong>Automatically Post to Social Media</strong>
                    </label>
                </div>
                <small class="text-muted">When enabled, posts will be automatically published to selected
                    platforms</small>
            </div>

            <div class="mb-3">
                <label class="form-label">Select Platforms</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="social_platforms" value="linkedin"
                        id="platform_linkedin" {{ 'checked' if 'linkedin' in settings.scheduling.social_platforms
                        else '' }}>
                    <label class="form-check-label" for="platform_linkedin">LinkedIn</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="social_platforms" value="facebook"
                        id="platform_facebook" {{ 'checked' if 'facebook' in settings.scheduling.social_platforms
                        else '' }}>
                    <label class="form-check-label" for="platform_facebook">Facebook</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="social_platforms" value="instagram"
                        id="platform_instagram" {{ 'checked' if 'instagram' in settings.scheduling.social_platforms
                        else '' }}>
                    <label class="form-check-label" for="platform_instagram">Instagram</label>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">
                    Upload Method
                    <span class="help-icon" onclick="showHelp('upload-method')" title="Help">?</span>
                </label>
                <select class="form-select" name="upload_method">
                    <option value="native" {{ 'selected' if (settings.scheduling.get('upload_method', 'native') == 'native') else '' }}>
                        Native Video Upload (Recommended)
                    </option>
                    <option value="link" {{ 'selected' if settings.scheduling.get('upload_method') == 'link' else '' }}>
                        Link Sharing (YouTube Link)
                    </option>
                </select>
                <small class="text-muted">
                    <strong>Native Upload:</strong> Downloads video and uploads natively (3-10x better engagement)<br>
                    <strong>Link Sharing:</strong> Just posts YouTube link (faster, lower engagement)
                </small>
            </div>
            <div class="mt-3 d-flex justify-content-end align-items-center gap-2">
                <small class="text-muted" style="font-size: 11px;">
                    <i class="bi bi-lightning-charge"></i> Auto-saves after 2 seconds
                </small>
                <button type="button" class="btn btn-primary section-save-btn" onclick="saveSection('social_media', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save Social Media Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Threshold Settings -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-speedometer2"></i> Daily Posting Limits (Thresholds)
        </div>
        <div class="card-body">
            <p class="text-muted mb-3">Set daily limits for each platform to stay within API rate limits and best practices. Auto-pilot mode will respect these thresholds.</p>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Daily Limit
                        <span class="help-icon" onclick="showHelp('linkedin-daily-limit')" title="Help">?</span>
                    </label>
                    <input type="number" class="form-control" name="linkedin_daily_limit"
                        value="{{ settings.thresholds.linkedin_daily_limit if settings.thresholds else 25 }}" min="1" max="50">
                    <small class="text-muted">Recommended: 25 posts/day (LinkedIn limit)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook Daily Limit
                        <span class="help-icon" onclick="showHelp('facebook-daily-limit')" title="Help">?</span>
                    </label>
                    <input type="number" class="form-control" name="facebook_daily_limit"
                        value="{{ settings.thresholds.facebook_daily_limit if settings.thresholds else 25 }}" min="1" max="50">
                    <small class="text-muted">Recommended: 25 posts/day (Facebook limit)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Instagram Daily Limit
                        <span class="help-icon" onclick="showHelp('instagram-daily-limit')" title="Help">?</span>
                    </label>
                    <input type="number" class="form-control" name="instagram_daily_limit"
                        value="{{ settings.thresholds.instagram_daily_limit if settings.thresholds else 25 }}" min="1" max="50">
                    <small class="text-muted">Recommended: 25 posts/day (Instagram limit)</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        YouTube Daily Limit
                        <span class="help-icon" onclick="showHelp('youtube-daily-limit')" title="Help">?</span>
                    </label>
                    <input type="number" class="form-control" name="youtube_daily_limit"
                        value="{{ settings.thresholds.youtube_daily_limit if settings.thresholds else 10 }}" min="1" max="20">
                    <small class="text-muted">Recommended: 10 videos/day (YouTube limit)</small>
                </div>
            </div>
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> These limits prevent exceeding platform rate limits. Auto-pilot mode will respect these thresholds.
            </div>
            <div class="mt-3 d-flex justify-content-end align-items-center gap-2">
                <small class="text-muted" style="font-size: 11px;">
                    <i class="bi bi-lightning-charge"></i> Auto-saves after 2 seconds
                </small>
                <button type="button" class="btn btn-primary section-save-btn" onclick="saveSection('thresholds', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save Daily Limits</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Targeting Settings -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-bullseye"></i> Audience Targeting
        </div>
        <div class="card-body">
            <p class="text-muted mb-3">Configure targeting based on your coaching expertise: System Design, Behavioral, and Leadership interviews for Engineering Managers, Product Managers, Solutions Architects, and senior technical roles.</p>
            
            <div class="mb-3">
                <label class="form-label">
                    Target Audience
                    <span class="help-icon" onclick="showHelp('target-audience')" title="Help">?</span>
                </label>
                <select class="form-select" name="target_audience">
                    <option value="usa_professionals" {{ 'selected' if (settings.targeting.target_audience if settings.targeting else 'usa_professionals') == 'usa_professionals' else '' }}>USA Professionals (Senior Roles) - Recommended</option>
                    <option value="professionals" {{ 'selected' if (settings.targeting.target_audience if settings.targeting else '') == 'professionals' else '' }}>Professionals (Senior Roles)</option>
                    <option value="all" {{ 'selected' if (settings.targeting.target_audience if settings.targeting else '') == 'all' else '' }}>All Audiences</option>
                </select>
                <small class="text-muted">Target senior professionals (Engineering Managers, Product Managers, Solutions Architects, Directors, VPs) preparing for System Design, Behavioral, and Leadership interviews at FAANG companies.</small>
            </div>

            <div class="mb-3">
                <label class="form-label">
                    Interview Types to Target
                    <span class="help-icon" onclick="showHelp('interview-types')" title="Help">?</span>
                </label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="sys_design_interview" 
                        id="type_sys_design" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['sys_design_interview']) and 'sys_design_interview' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_sys_design">System Design Interview</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="behavioral_interview" 
                        id="type_behavioral" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['behavioral_interview']) and 'behavioral_interview' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_behavioral">Behavioral Interview</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="leadership_interview" 
                        id="type_leadership" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['leadership_interview']) and 'leadership_interview' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_leadership">Leadership Interview</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="career_coaching" 
                        id="type_career" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['career_coaching']) and 'career_coaching' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_career">Career Coaching</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="resume_review" 
                        id="type_resume" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['resume_review']) and 'resume_review' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_resume">Resume Review</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="interview_types" value="salary_negotiation" 
                        id="type_salary" {{ 'checked' if (settings.targeting.interview_types if settings.targeting else ['salary_negotiation']) and 'salary_negotiation' in (settings.targeting.interview_types if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="type_salary">Salary Negotiation</label>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">
                    Roles to Target
                    <span class="help-icon" onclick="showHelp('role-levels')" title="Help">?</span>
                </label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="engineering_manager" 
                        id="role_em" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['engineering_manager']) and 'engineering_manager' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_em">Engineering Manager</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="product_manager" 
                        id="role_pm" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['product_manager']) and 'product_manager' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_pm">Product Manager</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="solutions_architect" 
                        id="role_sa" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['solutions_architect']) and 'solutions_architect' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_sa">Solutions Architect</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="cloud_engineer" 
                        id="role_cloud" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['cloud_engineer']) and 'cloud_engineer' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_cloud">Cloud Engineer</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="data_engineer" 
                        id="role_data" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['data_engineer']) and 'data_engineer' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_data">Data Engineer</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="sre" 
                        id="role_sre" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['sre']) and 'sre' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_sre">Site Reliability Engineer (SRE)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="staff_engineer" 
                        id="role_staff" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['staff_engineer']) and 'staff_engineer' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_staff">Staff Software Engineer</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="tpm" 
                        id="role_tpm" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['tpm']) and 'tpm' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_tpm">Technical Program Manager (TPM)</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="manager_tpm" 
                        id="role_manager_tpm" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['manager_tpm']) and 'manager_tpm' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_manager_tpm">Manager of TPMs</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="program_manager" 
                        id="role_program_manager" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['program_manager']) and 'program_manager' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_program_manager">Program Manager</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="technical_program_manager" 
                        id="role_technical_program_manager" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['technical_program_manager']) and 'technical_program_manager' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_technical_program_manager">Technical Program Manager</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="director" 
                        id="role_director" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['director']) and 'director' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_director">Director</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="role_levels" value="vp" 
                        id="role_vp" {{ 'checked' if (settings.targeting.role_levels if settings.targeting else ['vp']) and 'vp' in (settings.targeting.role_levels if settings.targeting else []) else '' }}>
                    <label class="form-check-label" for="role_vp">VP / Executive</label>
                </div>
            </div>

            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> <strong>Targeting Strategy:</strong> Auto-pilot will prioritize videos matching System Design, Behavioral, and Leadership interviews for Engineering Managers, Product Managers, Solutions Architects, Cloud Engineers, and other senior technical roles.
            </div>
            <div class="mt-3 d-flex justify-content-end align-items-center gap-2">
                <small class="text-muted" style="font-size: 11px;">
                    <i class="bi bi-lightning-charge"></i> Auto-saves after 2 seconds
                </small>
                <button type="button" class="btn btn-primary section-save-btn" onclick="saveSection('targeting', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save Targeting Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- CTA & Social Media Links Section -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-link-45deg"></i> CTA & Social Media Links
        </div>
        <div class="card-body">
            <p class="text-muted mb-4">Configure your social media URLs, WhatsApp numbers, and other CTAs. These will be automatically included in all generated posts.</p>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Booking URL
                        <span class="help-icon" onclick="showHelp('booking-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="booking_url"
                        value="{{ settings.cta.booking_url if settings.cta else 'https://fullstackmaster/book' }}"
                        placeholder="https://fullstackmaster/book">
                    <small class="text-muted">URL for 1-on-1 coaching bookings</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        WhatsApp Number
                        <span class="help-icon" onclick="showHelp('whatsapp-number')" title="Help">?</span>
                    </label>
                    <input type="text" class="form-control" name="whatsapp_number"
                        value="{{ settings.cta.whatsapp_number if settings.cta else '+1-609-442-4081' }}"
                        placeholder="+1-609-442-4081">
                    <small class="text-muted">WhatsApp number for direct contact</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        LinkedIn Profile URL
                        <span class="help-icon" onclick="showHelp('linkedin-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="linkedin_url"
                        value="{{ settings.cta.linkedin_url if settings.cta else '' }}"
                        placeholder="https://linkedin.com/in/yourprofile">
                    <small class="text-muted">Your LinkedIn profile URL</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Instagram Profile URL
                        <span class="help-icon" onclick="showHelp('instagram-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="instagram_url"
                        value="{{ settings.cta.instagram_url if settings.cta else '' }}"
                        placeholder="https://instagram.com/yourprofile">
                    <small class="text-muted">Your Instagram profile URL</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Facebook Page URL
                        <span class="help-icon" onclick="showHelp('facebook-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="facebook_url"
                        value="{{ settings.cta.facebook_url if settings.cta else '' }}"
                        placeholder="https://facebook.com/yourpage">
                    <small class="text-muted">Your Facebook page URL</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        YouTube Channel URL
                        <span class="help-icon" onclick="showHelp('youtube-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="youtube_url"
                        value="{{ settings.cta.youtube_url if settings.cta else '' }}"
                        placeholder="https://youtube.com/@yourchannel">
                    <small class="text-muted">Your YouTube channel URL</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Twitter/X Profile URL
                        <span class="help-icon" onclick="showHelp('twitter-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="twitter_url"
                        value="{{ settings.cta.twitter_url if settings.cta else '' }}"
                        placeholder="https://twitter.com/yourprofile">
                    <small class="text-muted">Your Twitter/X profile URL</small>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">
                        Website URL
                        <span class="help-icon" onclick="showHelp('website-url')" title="Help">?</span>
                    </label>
                    <input type="url" class="form-control" name="website_url"
                        value="{{ settings.cta.website_url if settings.cta else '' }}"
                        placeholder="https://yourwebsite.com">
                    <small class="text-muted">Your main website URL</small>
                </div>
            </div>
            
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> <strong>Note:</strong> These URLs and numbers will be automatically included in all generated social media posts and shorts scripts.
            </div>
            
            <div class="mt-3 d-flex justify-content-end align-items-center gap-2">
                <small class="text-muted" style="font-size: 11px;">
                    <i class="bi bi-lightning-charge"></i> Auto-saves after 2 seconds
                </small>
                <button type="button" class="btn btn-primary section-save-btn" onclick="saveSection('cta', this)">
                    <i class="bi bi-save"></i> <span class="btn-text">Save CTA Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Note: Each section has its own save button above. No need for "Save All" button. -->
</form>
{% endblock %}

{% block extra_css %}
<style>
    /* Help Icon Styles */
    .help-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--info);
        color: white;
        font-size: 13px;
        font-weight: 700;
        cursor: pointer;
        margin-left: 8px;
        vertical-align: middle;
        transition: all 0.2s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        line-height: 1;
    }

    .help-icon:hover {
        background: var(--primary);
        transform: scale(1.15);
        box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }

    .form-label {
        display: flex;
        align-items: center;
    }

    /* Configuration Checklist Styles */
    .config-checklist {
        padding: 8px 0;
    }

    .config-checklist h6 {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--border);
    }

    .checklist-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 0;
        font-size: 14px;
        transition: all 0.2s;
    }

    .checklist-item i {
        font-size: 18px;
        flex-shrink: 0;
    }

    .checklist-item.completed {
        color: var(--text-primary);
    }

    .checklist-item.pending {
        color: var(--text-muted);
    }

    .checklist-item span:not(.badge) {
        flex: 1;
    }

    .checklist-item:hover {
        background: var(--bg-hover);
        margin: 0 -12px;
        padding: 10px 12px;
        border-radius: 6px;
    }

    /* Help Modal Styles */
    .help-modal .modal-body {
        max-height: 70vh;
        overflow-y: auto;
    }

    .help-content {
        line-height: 1.8;
    }

    .help-content ol,
    .help-content ul {
        padding-left: 24px;
        margin: 12px 0;
    }

    .help-content li {
        margin: 8px 0;
    }

    .help-content code {
        background: var(--buffer-bg-light);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 13px;
        color: var(--buffer-primary);
    }

    .help-content .alert {
        margin: 12px 0;
    }

    .help-link {
        color: var(--buffer-primary);
        text-decoration: none;
        font-weight: 500;
    }

    .help-link:hover {
        text-decoration: underline;
    }

    /* Save Button Styles */
    .save-indicator {
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .btn-saving {
        opacity: 0.7;
        cursor: not-allowed;
    }

    .section-save-btn {
        min-width: 180px;
    }

    /* Auto-save indicator */
    .auto-save-indicator {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        padding: 4px 10px;
        border-radius: 12px;
        margin-left: 12px;
        font-weight: 500;
        animation: fadeIn 0.3s;
    }

    .auto-save-indicator.saving {
        background: var(--warning);
        color: white;
    }

    .auto-save-indicator.saved {
        background: var(--success);
        color: white;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-5px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Make help icons more visible */
    .help-icon {
        background: var(--info) !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .help-icon:hover {
        background: var(--primary) !important;
        transform: scale(1.15);
        box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }

    /* Auto-save notice */
    .auto-save-notice {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: var(--success);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 1000;
        display: none;
        animation: slideUp 0.3s ease-out;
    }

    .auto-save-notice.show {
        display: block;
    }

    @keyframes slideUp {
        from {
            transform: translateY(20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
</style>
{% endblock %}

<!-- Help Modal -->
<div class="modal fade help-modal" id="helpModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="helpModalTitle">Help</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="help-content" id="helpModalContent"></div>
            </div>
            <div class="modal-footer">
                <a href="/docs" target="_blank" class="btn btn-outline-primary">
                    <i class="bi bi-book"></i> View Full Documentation
                </a>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    // Help content for each field
    const helpContent = {
        'linkedin-client-id': {
            title: 'LinkedIn Client ID',
            content: `
                <h6>How to get LinkedIn Client ID:</h6>
                <ol>
                    <li>Go to <a href="https://www.linkedin.com/developers/" target="_blank" class="help-link">LinkedIn Developers</a></li>
                    <li>Sign in with your LinkedIn account</li>
                    <li>Click <strong>"Create app"</strong> or select your existing app</li>
                    <li>Go to the <strong>"Auth"</strong> tab</li>
                    <li>Under <strong>"OAuth 2.0 settings"</strong>, you'll see your <strong>"Client ID"</strong></li>
                    <li>Copy and paste it here</li>
                </ol>
                <div class="alert alert-info">
                    <strong>Tip:</strong> Your Client ID is public and can be shared. It's different from your Client Secret.
                </div>
            `
        },
        'linkedin-client-secret': {
            title: 'LinkedIn Client Secret',
            content: `
                <h6>How to get LinkedIn Client Secret:</h6>
                <ol>
                    <li>Go to <a href="https://www.linkedin.com/developers/" target="_blank" class="help-link">LinkedIn Developers</a></li>
                    <li>Select your app</li>
                    <li>Go to the <strong>"Auth"</strong> tab</li>
                    <li>Under <strong>"OAuth 2.0 settings"</strong>, find <strong>"Client Secret"</strong></li>
                    <li>Click <strong>"Show"</strong> to reveal it (you may need to verify your identity)</li>
                    <li>Copy and paste it here</li>
                </ol>
                <div class="alert alert-warning">
                    <strong>Important:</strong> Keep your Client Secret private! Never share it publicly or commit it to version control.
                </div>
            `
        },
        'linkedin-access-token': {
            title: 'LinkedIn Access Token (Optional)',
            content: `
                <h6>LinkedIn Access Token:</h6>
                <p>This field is <strong>optional</strong>. You only need it if you already have an access token.</p>
                
                <h6>If you don't have one:</h6>
                <p>Just enter your <strong>Client ID</strong> and <strong>Client Secret</strong> above. The system will generate an access token using OAuth flow when needed.</p>
                
                <h6>If you want to get one manually:</h6>
                <ol>
                    <li>Go to your LinkedIn app's <strong>"Auth"</strong> tab</li>
                    <li>Click <strong>"Generate a token"</strong></li>
                    <li>Select scopes: <code>w_member_social</code> (required for posting)</li>
                    <li>Click <strong>"Generate token"</strong></li>
                    <li>Copy the token and paste it here</li>
                </ol>
            `
        },
        'linkedin-person-urn': {
            title: 'LinkedIn Person URN',
            content: `
                <h6>How to get LinkedIn Person URN:</h6>
                
                <h6>Method 1: From LinkedIn Profile URL</h6>
                <ol>
                    <li>Go to your <a href="https://www.linkedin.com/me" target="_blank" class="help-link">LinkedIn Profile</a></li>
                    <li>Check your profile URL (e.g., <code>linkedin.com/in/yourname-123456/</code>)</li>
                    <li>The URN format is: <code>urn:li:person:xxxxx</code></li>
                </ol>
                
                <h6>Method 2: Using LinkedIn API</h6>
                <ol>
                    <li>Use your LinkedIn Access Token</li>
                    <li>Make a request: <code>GET https://api.linkedin.com/v2/me</code></li>
                    <li>The response contains an <code>id</code> field</li>
                    <li>Copy that ID (format: <code>urn:li:person:xxxxx</code>)</li>
                </ol>
                
                <h6>Method 3: From Developer Portal</h6>
                <ol>
                    <li>Go to <a href="https://www.linkedin.com/developers/" target="_blank" class="help-link">LinkedIn Developers</a></li>
                    <li>Select your app</li>
                    <li>Go to <strong>"Products"</strong> → <strong>"Marketing Developer Platform"</strong></li>
                    <li>Your Person URN may be displayed there</li>
                </ol>
                
                <div class="alert alert-info">
                    <strong>Format:</strong> Must be in the format <code>urn:li:person:xxxxx</code> (required for posting)
                </div>
            `
        },
        'facebook-app-id': {
            title: 'Facebook App ID',
            content: `
                <h6>How to get Facebook App ID:</h6>
                <ol>
                    <li>Go to <a href="https://developers.facebook.com/" target="_blank" class="help-link">Facebook Developers</a></li>
                    <li>Sign in with your Facebook account</li>
                    <li>Click <strong>"My Apps"</strong> → <strong>"Create App"</strong> (or select existing app)</li>
                    <li>Select app type: <strong>"Business"</strong> or <strong>"Other"</strong></li>
                    <li>Fill in app name and click <strong>"Create App"</strong></li>
                    <li>In your app dashboard, go to <strong>"Settings"</strong> → <strong>"Basic"</strong></li>
                    <li>Find <strong>"App ID"</strong> - copy and paste it here</li>
                </ol>
                <div class="alert alert-info">
                    <strong>Note:</strong> You'll need to add the <strong>"Pages"</strong> product to your app for posting functionality.
                </div>
            `
        },
        'facebook-app-secret': {
            title: 'Facebook App Secret',
            content: `
                <h6>How to get Facebook App Secret:</h6>
                <ol>
                    <li>Go to <a href="https://developers.facebook.com/" target="_blank" class="help-link">Facebook Developers</a></li>
                    <li>Select your app</li>
                    <li>Go to <strong>"Settings"</strong> → <strong>"Basic"</strong></li>
                    <li>Find <strong>"App Secret"</strong></li>
                    <li>Click <strong>"Show"</strong> to reveal it (you may need to enter your password)</li>
                    <li>Copy and paste it here</li>
                </ol>
                <div class="alert alert-warning">
                    <strong>Important:</strong> Keep your App Secret private! Never share it publicly or commit it to version control.
                </div>
            `
        },
        'facebook-page-token': {
            title: 'Facebook Page Access Token (Optional)',
            content: `
                <h6>Facebook Page Access Token:</h6>
                <p>This field is <strong>optional</strong>. You only need it if you already have a page access token.</p>
                
                <h6>If you don't have one:</h6>
                <p>Just enter your <strong>App ID</strong> and <strong>App Secret</strong> above. The system will generate a page access token using OAuth flow when needed.</p>
                
                <h6>If you want to get one manually:</h6>
                <ol>
                    <li>Go to <a href="https://developers.facebook.com/tools/explorer/" target="_blank" class="help-link">Graph API Explorer</a></li>
                    <li>Select your app from the dropdown</li>
                    <li>Click <strong>"Generate Access Token"</strong></li>
                    <li>Select permissions: <code>pages_show_list</code>, <code>pages_manage_posts</code></li>
                    <li>Generate the token</li>
                    <li>Call <code>GET /me/accounts</code> to get your pages</li>
                    <li>Copy the <code>access_token</code> for your target page</li>
                </ol>
            `
        },
        'facebook-page-id': {
            title: 'Facebook Page ID',
            content: `
                <h6>How to get Facebook Page ID:</h6>
                
                <h6>Method 1: From Facebook Page Settings</h6>
                <ol>
                    <li>Go to your <a href="https://www.facebook.com/pages" target="_blank" class="help-link">Facebook Page</a></li>
                    <li>Click <strong>"Settings"</strong> on the left sidebar</li>
                    <li>Click <strong>"Page Info"</strong></li>
                    <li>Scroll down to find <strong>"Page ID"</strong></li>
                    <li>Copy and paste it here</li>
                </ol>
                
                <h6>Method 2: Using Graph API Explorer</h6>
                <ol>
                    <li>Go to <a href="https://developers.facebook.com/tools/explorer/" target="_blank" class="help-link">Graph API Explorer</a></li>
                    <li>Select your app and generate a token</li>
                    <li>Call <code>GET /me/accounts</code></li>
                    <li>The response shows all your pages with their <code>id</code> fields</li>
                    <li>Copy the <code>id</code> for your target page</li>
                </ol>
                
                <h6>Method 3: From Page URL</h6>
                <ol>
                    <li>Go to your Facebook Page</li>
                    <li>Click <strong>"About"</strong> on the left sidebar</li>
                    <li>Scroll down to find <strong>"Page ID"</strong></li>
                    <li>Copy and paste it here</li>
                </ol>
            `
        },
        'instagram-account-id': {
            title: 'Instagram Business Account ID',
            content: `
                <h6>How to get Instagram Business Account ID:</h6>
                
                <h6>Prerequisites:</h6>
                <ul>
                    <li>Your Instagram account must be converted to a <strong>Business Account</strong></li>
                    <li>It must be connected to a Facebook Page</li>
                </ul>
                
                <h6>Method 1: Using Graph API Explorer</h6>
                <ol>
                    <li>Go to <a href="https://developers.facebook.com/tools/explorer/" target="_blank" class="help-link">Graph API Explorer</a></li>
                    <li>Select your Facebook app</li>
                    <li>Use your Facebook Page Access Token</li>
                    <li>Call: <code>GET /{page-id}?fields=instagram_business_account</code></li>
                    <li>Replace <code>{page-id}</code> with your Facebook Page ID</li>
                    <li>The response contains <code>instagram_business_account.id</code></li>
                    <li>Copy that ID and paste it here</li>
                </ol>
                
                <h6>Method 2: From Facebook Page Settings</h6>
                <ol>
                    <li>Go to your Facebook Page</li>
                    <li>Click <strong>"Settings"</strong> → <strong>"Instagram"</strong></li>
                    <li>Your Instagram Business Account ID may be displayed there</li>
                </ol>
                
                <div class="alert alert-warning">
                    <strong>Note:</strong> Instagram requires a Business Account. Convert your personal account to Business in Instagram app → Settings → Account → Switch to Professional Account → Business.
                </div>
            `
        },
        'instagram-access-token': {
            title: 'Instagram Access Token (Optional)',
            content: `
                <h6>Instagram Access Token:</h6>
                <p>This field is <strong>optional</strong>. Instagram uses the same access token as your Facebook Page.</p>
                
                <h6>If you don't have one:</h6>
                <p>Just enter your <strong>Facebook App ID</strong> and <strong>Facebook App Secret</strong> above. The Instagram access token is the same as your Facebook Page Access Token.</p>
                
                <h6>If you want to get one manually:</h6>
                <ol>
                    <li>Follow the steps to get a Facebook Page Access Token</li>
                    <li>Your Instagram Access Token is the same as your Facebook Page Access Token</li>
                    <li>Make sure your Instagram Business Account is connected to the Facebook Page</li>
                </ol>
                
                <div class="alert alert-info">
                    <strong>Important:</strong> Instagram API uses the Facebook Graph API, so they share the same access token.
                </div>
            `
        },
        'youtube-client-secret': {
            title: 'YouTube Client Secret File',
            content: `
                <h6>How to get YouTube Client Secret File:</h6>
                <ol>
                    <li>Go to <a href="https://console.cloud.google.com/" target="_blank" class="help-link">Google Cloud Console</a></li>
                    <li>Create a new project or select an existing one</li>
                    <li>Enable the <strong>YouTube Data API v3</strong>:
                        <ul>
                            <li>Go to <strong>"APIs & Services"</strong> → <strong>"Library"</strong></li>
                            <li>Search for "YouTube Data API v3"</li>
                            <li>Click <strong>"Enable"</strong></li>
                        </ul>
                    </li>
                    <li>Create credentials:
                        <ul>
                            <li>Go to <strong>"APIs & Services"</strong> → <strong>"Credentials"</strong></li>
                            <li>Click <strong>"Create Credentials"</strong> → <strong>"OAuth client ID"</strong></li>
                            <li>Select application type: <strong>"Desktop app"</strong> or <strong>"Web application"</strong></li>
                            <li>Give it a name (e.g., "YouTube Automation")</li>
                            <li>Click <strong>"Create"</strong></li>
                        </ul>
                    </li>
                    <li>Download the JSON file:
                        <ul>
                            <li>Click the download icon next to your OAuth 2.0 Client ID</li>
                            <li>This downloads a file named <code>client_secret_xxxxx.json</code></li>
                        </ul>
                    </li>
                    <li>Rename it to <code>client_secret.json</code> and upload it here</li>
                </ol>
                <div class="alert alert-info">
                    <strong>Note:</strong> The file must be named <code>client_secret.json</code> and placed in the project root directory.
                </div>
            `
        },
        'ayrshare-api-key': {
            title: 'Ayrshare API Key (Alternative)',
            content: `
                <h6>What is Ayrshare?</h6>
                <p>Ayrshare is a unified API that allows you to post to multiple social media platforms (LinkedIn, Facebook, Instagram, Twitter, etc.) with a single API call.</p>
                
                <h6>How to get Ayrshare API Key:</h6>
                <ol>
                    <li>Go to <a href="https://www.ayrshare.com/" target="_blank" class="help-link">Ayrshare.com</a></li>
                    <li>Sign up for a free account</li>
                    <li>After signing up, go to your <strong>Dashboard</strong></li>
                    <li>Find your <strong>API Key</strong> in the dashboard</li>
                    <li>Copy and paste it here</li>
                </ol>
                
                <h6>Benefits of using Ayrshare:</h6>
                <ul>
                    <li>Simplified API - one key for all platforms</li>
                    <li>No need to manage multiple OAuth flows</li>
                    <li>Unified posting interface</li>
                    <li>Built-in analytics</li>
                </ul>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> This is optional. You can use individual platform APIs (LinkedIn, Facebook, Instagram) instead, or use Ayrshare as a simpler alternative.
                </div>
            `
        },
        'videos-per-day': {
            title: 'Videos Per Day',
            content: `
                <h6>What is Videos Per Day?</h6>
                <p>This setting controls how many videos the automation will process and schedule per day when auto-pilot mode is enabled.</p>
                
                <h6>Recommended Values:</h6>
                <ul>
                    <li><strong>1-3 videos/day:</strong> For consistent, steady content distribution</li>
                    <li><strong>4-6 videos/day:</strong> For active channels with regular posting</li>
                    <li><strong>7-10 videos/day:</strong> For high-volume content creators (use with caution)</li>
                </ul>
                
                <h6>How it works:</h6>
                <ol>
                    <li>Auto-pilot selects one video from each playlist</li>
                    <li>It schedules up to this many videos per day</li>
                    <li>The system respects daily limits for each platform</li>
                    <li>Videos are distributed across the selected day of the week</li>
                </ol>
                
                <div class="alert alert-warning">
                    <strong>Tip:</strong> Start with a lower number (1-3) and increase gradually based on your audience engagement and platform limits.
                </div>
            `
        },
        'schedule-day': {
            title: 'Schedule Day',
            content: `
                <h6>What is Schedule Day?</h6>
                <p>This setting determines which day of the week the automation will run and schedule videos.</p>
                
                <h6>How it works:</h6>
                <ol>
                    <li>Select the day when you want videos to be scheduled</li>
                    <li>The automation will run on that day each week</li>
                    <li>Videos will be scheduled for posting at the specified times</li>
                    <li>One video from each playlist will be selected and scheduled</li>
                </ol>
                
                <h6>Best Practices:</h6>
                <ul>
                    <li><strong>Wednesday:</strong> Mid-week engagement is typically high</li>
                    <li><strong>Thursday/Friday:</strong> Good for weekend viewing</li>
                    <li><strong>Monday:</strong> Start of the week, fresh content</li>
                    <li>Avoid weekends if targeting professional audiences</li>
                </ul>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> The automation will run automatically on the selected day. Make sure your server is running or use a scheduler like cron.
                </div>
            `
        },
        'youtube-schedule-time': {
            title: 'YouTube Schedule Time (IST)',
            content: `
                <h6>What is YouTube Schedule Time?</h6>
                <p>This is the time (in Indian Standard Time - IST) when videos will be scheduled for publication on YouTube.</p>
                
                <h6>Default Value:</h6>
                <p>The default is <strong>23:00 (11:00 PM IST)</strong>, which is optimal for USA audiences (morning time in USA).</p>
                
                <h6>How to choose the best time:</h6>
                <ul>
                    <li>Check your YouTube Analytics for when your audience is most active</li>
                    <li>Consider your target audience's timezone:
                        <ul>
                            <li><strong>USA Students:</strong> 11 PM IST = ~1 PM EST (afternoon, good engagement)</li>
                            <li><strong>Indian Audience:</strong> 6-9 PM IST (evening prime time)</li>
                            <li><strong>Global Audience:</strong> 11 PM IST works well for multiple timezones</li>
                        </ul>
                    </li>
                    <li>Test different times and monitor engagement</li>
                </ul>
                
                <h6>Time Format:</h6>
                <p>Enter time in 24-hour format (HH:MM), for example:
                    <ul>
                        <li><code>23:00</code> = 11:00 PM</li>
                        <li><code>19:30</code> = 7:30 PM</li>
                        <li><code>09:00</code> = 9:00 AM</li>
                    </ul>
                </p>
            `
        },
        'social-media-schedule-time': {
            title: 'Social Media Schedule Time (IST)',
            content: `
                <h6>What is Social Media Schedule Time?</h6>
                <p>This is the time (in Indian Standard Time - IST) when posts will be published on LinkedIn, Facebook, and Instagram.</p>
                
                <h6>Default Value:</h6>
                <p>The default is <strong>19:30 (7:30 PM IST)</strong>, which is optimal for USA audiences (morning time in USA).</p>
                
                <h6>Best Times for Social Media:</h6>
                <ul>
                    <li><strong>LinkedIn:</strong> Tuesday-Thursday, 8-10 AM or 12-1 PM (local time of audience)</li>
                    <li><strong>Facebook:</strong> 1-3 PM or 6-9 PM (local time of audience)</li>
                    <li><strong>Instagram:</strong> 11 AM-1 PM or 7-9 PM (local time of audience)</li>
                </ul>
                
                <h6>For USA Students (Your Target Audience):</h6>
                <p>7:30 PM IST = ~10:00 AM EST (morning, good for LinkedIn and professional content)</p>
                
                <h6>Time Format:</h6>
                <p>Enter time in 24-hour format (HH:MM), for example:
                    <ul>
                        <li><code>19:30</code> = 7:30 PM</li>
                        <li><code>23:00</code> = 11:00 PM</li>
                        <li><code>09:00</code> = 9:00 AM</li>
                    </ul>
                </p>
                
                <div class="alert alert-info">
                    <strong>Tip:</strong> Check the Insights page to see when your audience is most active and adjust accordingly.
                </div>
            `
        },
        'upload-method': {
            title: 'Upload Method',
            content: `
                <h6>What is Upload Method?</h6>
                <p>This determines how videos are posted to social media platforms when you schedule or publish posts.</p>
                
                <h6>Option 1: Native Video Upload (Recommended)</h6>
                <ul>
                    <li><strong>Process:</strong> Downloads video from YouTube → Uploads natively to platform</li>
                    <li><strong>Engagement:</strong> 3-10x better than link sharing</li>
                    <li><strong>Algorithm:</strong> Better ranking in feed</li>
                    <li><strong>Professional:</strong> Videos play directly in feed</li>
                    <li><strong>Best for:</strong> Maximum engagement and bookings</li>
                </ul>
                
                <h6>Option 2: Link Sharing</h6>
                <ul>
                    <li><strong>Process:</strong> Just posts YouTube link with caption</li>
                    <li><strong>Engagement:</strong> Lower (but still works)</li>
                    <li><strong>Speed:</strong> Faster, no download needed</li>
                    <li><strong>Storage:</strong> No local storage required</li>
                    <li><strong>Best for:</strong> Quick posting, testing</li>
                </ul>
                
                <div class="alert alert-success">
                    <strong>Recommendation:</strong> Use Native Video Upload for maximum engagement and business growth. 
                    Videos are downloaded temporarily during upload, then cleaned up automatically.
                </div>
                
                <h6>How Native Upload Works:</h6>
                <ol>
                    <li>When you schedule a post, only the post content is saved</li>
                    <li>When it's time to publish, the system:
                        <ul>
                            <li>Downloads video from YouTube</li>
                            <li>Uploads natively to LinkedIn/Facebook/Instagram</li>
                            <li>Posts with your clickbait caption</li>
                            <li>Cleans up downloaded video</li>
                        </ul>
                    </li>
                    <li>All happens automatically in the background</li>
                </ol>
            `
        },
        'youtube-playlist-id': {
            title: 'YouTube Playlist ID',
            content: `
                <h6>What is YouTube Playlist ID?</h6>
                <p>This is the unique identifier for a specific YouTube playlist. If provided, the automation will only process videos from this playlist.</p>
                
                <h6>How to find a Playlist ID:</h6>
                <ol>
                    <li>Go to your YouTube playlist</li>
                    <li>Look at the URL in your browser</li>
                    <li>The Playlist ID is the part after <code>list=</code></li>
                    <li>Example: <code>https://www.youtube.com/playlist?list=PLxxxxx...</code></li>
                    <li>Copy the <code>PLxxxxx...</code> part</li>
                </ol>
                
                <h6>Examples:</h6>
                <ul>
                    <li>URL: <code>https://www.youtube.com/playlist?list=PLrAXtmRdnEQy6nuLMH7uL0zQqFXN3qjFp</code></li>
                    <li>Playlist ID: <code>PLrAXtmRdnEQy6nuLMH7uL0zQqFXN3qjFp</code></li>
                </ul>
                
                <h6>When to use this:</h6>
                <ul>
                    <li><strong>Leave empty:</strong> Process all playlists (recommended for auto-pilot)</li>
                    <li><strong>Specify ID:</strong> Process only a specific playlist (useful for testing or targeted campaigns)</li>
                </ul>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> This field is optional. If left empty, the system will process all playlists from your channel.
                </div>
            `
        },
        'export-type': {
            title: 'Export Type',
            content: `
                <h6>What is Export Type?</h6>
                <p>This setting determines which playlists the automation will process and schedule.</p>
                
                <h6>Options:</h6>
                <ul>
                    <li><strong>Shorts Only:</strong> Process only YouTube Shorts playlists
                        <ul>
                            <li>Ideal for short-form content distribution</li>
                            <li>Faster processing</li>
                            <li>Better for social media cross-posting</li>
                        </ul>
                    </li>
                    <li><strong>All Playlists:</strong> Process all playlists from your channel
                        <ul>
                            <li>Includes both regular videos and Shorts</li>
                            <li>More comprehensive content selection</li>
                            <li>Better for diverse content strategy</li>
                        </ul>
                    </li>
                </ul>
                
                <h6>Which should you choose?</h6>
                <ul>
                    <li><strong>Choose "Shorts Only" if:</strong>
                        <ul>
                            <li>You primarily create Shorts content</li>
                            <li>You want to focus on short-form social media posts</li>
                            <li>You want faster processing</li>
                        </ul>
                    </li>
                    <li><strong>Choose "All Playlists" if:</strong>
                        <ul>
                            <li>You have a mix of content types</li>
                            <li>You want maximum content variety</li>
                            <li>You want to schedule both Shorts and regular videos</li>
                        </ul>
                    </li>
                </ul>
            `
        },
        'linkedin-daily-limit': {
            title: 'LinkedIn Daily Limit',
            content: `
                <h6>What is LinkedIn Daily Limit?</h6>
                <p>This setting controls the maximum number of posts that can be scheduled to LinkedIn per day by the auto-pilot mode.</p>
                
                <h6>LinkedIn Platform Limits:</h6>
                <ul>
                    <li><strong>Official Limit:</strong> LinkedIn allows up to 25 posts per day per account</li>
                    <li><strong>Recommended:</strong> 1-5 posts per day for best engagement</li>
                    <li><strong>Maximum Safe:</strong> 10-15 posts per day</li>
                </ul>
                
                <h6>Best Practices:</h6>
                <ul>
                    <li>Start with 1-3 posts per day</li>
                    <li>Monitor engagement and adjust</li>
                    <li>Avoid posting too frequently (can reduce reach)</li>
                    <li>Space posts throughout the day for better visibility</li>
                </ul>
                
                <div class="alert alert-warning">
                    <strong>Important:</strong> Exceeding platform limits may result in account restrictions or shadowbanning. The auto-pilot will respect this limit and stop scheduling once reached.
                </div>
            `
        },
        'facebook-daily-limit': {
            title: 'Facebook Daily Limit',
            content: `
                <h6>What is Facebook Daily Limit?</h6>
                <p>This setting controls the maximum number of posts that can be scheduled to Facebook per day by the auto-pilot mode.</p>
                
                <h6>Facebook Platform Limits:</h6>
                <ul>
                    <li><strong>Official Limit:</strong> Facebook allows up to 25 posts per day per page</li>
                    <li><strong>Recommended:</strong> 1-3 posts per day for best engagement</li>
                    <li><strong>Maximum Safe:</strong> 5-10 posts per day</li>
                </ul>
                
                <h6>Best Practices:</h6>
                <ul>
                    <li>Post 1-2 times per day for optimal reach</li>
                    <li>Space posts 4-6 hours apart</li>
                    <li>Focus on quality over quantity</li>
                    <li>Monitor page insights for best posting times</li>
                </ul>
                
                <div class="alert alert-warning">
                    <strong>Important:</strong> Posting too frequently can reduce reach due to Facebook's algorithm. The auto-pilot will respect this limit.
                </div>
            `
        },
        'instagram-daily-limit': {
            title: 'Instagram Daily Limit',
            content: `
                <h6>What is Instagram Daily Limit?</h6>
                <p>This setting controls the maximum number of posts that can be scheduled to Instagram per day by the auto-pilot mode.</p>
                
                <h6>Instagram Platform Limits:</h6>
                <ul>
                    <li><strong>Official Limit:</strong> Instagram allows up to 25 posts per day per account</li>
                    <li><strong>Recommended:</strong> 1-2 posts per day for best engagement</li>
                    <li><strong>Maximum Safe:</strong> 3-5 posts per day</li>
                </ul>
                
                <h6>Best Practices:</h6>
                <ul>
                    <li>Post 1-2 times per day for optimal engagement</li>
                    <li>Space posts at least 3-4 hours apart</li>
                    <li>Focus on high-quality, engaging content</li>
                    <li>Use Instagram Insights to find best posting times</li>
                </ul>
                
                <div class="alert alert-warning">
                    <strong>Important:</strong> Instagram's algorithm favors quality over quantity. Posting too frequently can reduce reach. The auto-pilot will respect this limit.
                </div>
            `
        },
        'youtube-daily-limit': {
            title: 'YouTube Daily Limit',
            content: `
                <h6>What is YouTube Daily Limit?</h6>
                <p>This setting controls the maximum number of videos that can be scheduled to YouTube per day by the auto-pilot mode.</p>
                
                <h6>YouTube Platform Limits:</h6>
                <ul>
                    <li><strong>Official Limit:</strong> YouTube allows up to 6 uploads per day per channel (for most accounts)</li>
                    <li><strong>Recommended:</strong> 1-2 videos per day for best performance</li>
                    <li><strong>Maximum Safe:</strong> 3-5 videos per day</li>
                </ul>
                
                <h6>Best Practices:</h6>
                <ul>
                    <li>Post 1 video per day for consistent growth</li>
                    <li>Maintain a regular posting schedule</li>
                    <li>Focus on quality content over quantity</li>
                    <li>Use YouTube Analytics to find optimal posting times</li>
                </ul>
                
                <div class="alert alert-warning">
                    <strong>Important:</strong> YouTube's algorithm rewards consistent, quality content. The auto-pilot will respect this limit to avoid overwhelming your audience.
                </div>
            `
        },
        'target-audience': {
            title: 'Target Audience',
            content: `
                <h6>What is Target Audience?</h6>
                <p>This setting helps the auto-pilot prioritize which videos to schedule based on your target audience.</p>
                
                <h6>Options:</h6>
                <ul>
                    <li><strong>Professionals (Senior Roles):</strong> <strong>Recommended for your coaching</strong>
                        <ul>
                            <li>Targets working professionals preparing for senior roles</li>
                            <li>Focuses on System Design, Behavioral, and Leadership interviews</li>
                            <li>Prioritizes Engineering Managers, Product Managers, Solutions Architects, Cloud Engineers, etc.</li>
                            <li>Optimizes posting times for professional networking (USA timezones)</li>
                            <li>Aligns with your coaching at AWS and FAANG companies</li>
                        </ul>
                    </li>
                    <li><strong>All Audiences:</strong>
                        <ul>
                            <li>No specific targeting</li>
                            <li>Processes all videos equally</li>
                            <li>Good for diverse content strategy</li>
                        </ul>
                    </li>
                    <li><strong>USA Students (Interview Prep):</strong>
                        <ul>
                            <li>Targets students preparing for tech interviews</li>
                            <li>Focuses on entry-level and new graduate roles</li>
                            <li>Optimizes posting times for USA student timezones</li>
                        </ul>
                    </li>
                </ul>
                
                <h6>How it works:</h6>
                <p>The auto-pilot will use this setting along with "Interview Types" and "Roles" to select the most relevant videos for your audience. Based on your coaching profile, "Professionals (Senior Roles)" is the recommended setting.</p>
            `
        },
        'interview-types': {
            title: 'Interview Types to Target',
            content: `
                <h6>What are Interview Types?</h6>
                <p>These checkboxes help the auto-pilot identify and prioritize videos based on your coaching expertise.</p>
                
                <h6>Available Types (Based on Your Coaching Profile):</h6>
                <ul>
                    <li><strong>System Design Interview:</strong> FAANG-style system design, architecture, scalability. You help build system design depth for senior engineers and architects. (Your main focus)</li>
                    <li><strong>Behavioral Interview:</strong> Leadership principles, STAR method, executive communication, influencing skills. You coach behavioral interviews aligned to leadership principles. (Your specialty)</li>
                    <li><strong>Leadership Interview:</strong> Leadership behavior, managing up, strategic thinking, navigating invisible challenges. You help engineers step into senior roles confidently. (Your expertise)</li>
                    <li><strong>Career Coaching:</strong> Career growth, leveling up, breaking into big tech. You tailor sessions to career goals for engineers, architects, and PMs.</li>
                    <li><strong>Resume Review:</strong> Resume optimization for engineers, architects, and PMs applying to Amazon, Google, DraftKings, Red Hat, and more. You've screened 100+ resumes.</li>
                    <li><strong>Salary Negotiation:</strong> Compensation negotiation, equity, sign-ons. You've helped clients unlock $4M+ in total comp increases ($80K–$300K boosts).</li>
                </ul>
                
                <div class="alert alert-warning">
                    <strong>Note:</strong> You do NOT coach LeetCode/coding interviews. Focus is on System Design, Behavioral, Leadership, Career Coaching, Resume Review, and Salary Negotiation for senior professionals.
                </div>
                
                <h6>How it works:</h6>
                <ol>
                    <li>The system analyzes video titles, descriptions, and tags</li>
                    <li>It matches them to the selected interview types</li>
                    <li>Auto-pilot prioritizes videos that match your coaching focus</li>
                    <li>Select all types that align with your content</li>
                </ol>
                
                <div class="alert alert-info">
                    <strong>Your Focus:</strong> System Design, Behavioral, and Leadership interviews for senior technical roles at AWS, Amazon, Google, Microsoft, Databricks, and other FAANG companies. You work with senior engineers, architects, engineering managers, directors, and VP-level leaders.
                </div>
                
                <p><a href="/docs#targeting" target="_blank" class="help-link">📖 Learn more about targeting strategy →</a></p>
            `
        },
        'role-levels': {
            title: 'Roles to Target',
            content: `
                <h6>What are Roles to Target?</h6>
                <p>These checkboxes help the auto-pilot identify and prioritize videos based on the roles you coach for.</p>
                
                <h6>Available Roles (Based on Your Coaching Profile):</h6>
                <ul>
                    <li><strong>Engineering Manager:</strong> Tech leadership, team management, managing engineers</li>
                    <li><strong>Product Manager:</strong> Product management, product strategy, product development</li>
                    <li><strong>Solutions Architect:</strong> Cloud architecture, AWS, system design, customer solutions (Your current role at AWS)</li>
                    <li><strong>Cloud Engineer:</strong> Cloud infrastructure, AWS, cloud computing, cloud infrastructure</li>
                    <li><strong>Data Engineer:</strong> Data engineering, big data, data pipelines</li>
                    <li><strong>Site Reliability Engineer (SRE):</strong> Reliability, infrastructure, SRE practices</li>
                    <li><strong>Staff Software Engineer:</strong> Senior engineering, technical leadership, staff-level engineering</li>
                    <li><strong>Technical Program Manager (TPM):</strong> Program management, technical programs, TPM roles</li>
                    <li><strong>Manager of TPMs:</strong> Managing TPM teams, TPM leadership</li>
                    <li><strong>Program Manager:</strong> Program management, cross-functional programs</li>
                    <li><strong>Director:</strong> Senior leadership, strategic direction, director-level roles</li>
                    <li><strong>VP / Executive:</strong> Executive leadership, C-level, VP-level leaders</li>
                </ul>
                
                <h6>How it works:</h6>
                <ol>
                    <li>The system analyzes video content for role indicators</li>
                    <li>It matches them to the selected roles</li>
                    <li>Auto-pilot prioritizes videos that match your coaching roles</li>
                    <li>Select all roles you coach for to maximize content availability</li>
                </ol>
                
                <h6>Your Coaching Focus:</h6>
                <p>As a Senior Customer Solutions Manager at AWS, you coach <strong>senior engineers, architects, engineering managers, directors, and VP-level leaders</strong> at AWS, Amazon, Google, Microsoft, Databricks, and other FAANG companies. You've conducted over 100 interviews and coached 50+ people throughout your career.</p>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> These settings work together with "Target Audience" and "Interview Types" to create a comprehensive targeting strategy aligned with your coaching expertise. Focus on senior-level professionals, not entry-level or junior roles.
                </div>
                
                <p><a href="/docs#targeting" target="_blank" class="help-link">📖 Learn more about role targeting →</a></p>
            `
        }
    };

    function showHelp(helpKey) {
        const help = helpContent[helpKey];
        if (!help) {
            console.error('Help content not found for:', helpKey);
            alert('Help content not available for this field.');
            return;
        }
        
        document.getElementById('helpModalTitle').textContent = help.title;
        
        // Add help page link if not already present
        let content = help.content;
        if (!content.includes('help-link') || !content.includes('/docs')) {
            // Map help keys to documentation anchors
            const docAnchors = {
                'linkedin-client-id': '/docs#linkedin',
                'linkedin-client-secret': '/docs#linkedin',
                'linkedin-access-token': '/docs#linkedin',
                'linkedin-person-urn': '/docs#linkedin',
                'facebook-app-id': '/docs#facebook',
                'facebook-app-secret': '/docs#facebook',
                'facebook-page-token': '/docs#facebook',
                'facebook-page-id': '/docs#facebook',
                'instagram-account-id': '/docs#instagram',
                'instagram-access-token': '/docs#instagram',
                'ayrshare-api-key': '/docs#ayrshare',
                'youtube-client-secret': '/docs#youtube',
                'videos-per-day': '/docs#scheduling',
                'schedule-day': '/docs#scheduling',
                'youtube-schedule-time': '/docs#scheduling',
                'social-media-schedule-time': '/docs#scheduling',
                'youtube-playlist-id': '/docs#scheduling',
                'export-type': '/docs#scheduling',
                'upload-method': '/docs#upload',
                'linkedin-daily-limit': '/docs#thresholds',
                'facebook-daily-limit': '/docs#thresholds',
                'instagram-daily-limit': '/docs#thresholds',
                'youtube-daily-limit': '/docs#thresholds',
                'target-audience': '/docs#targeting',
                'interview-types': '/docs#targeting',
                'role-levels': '/docs#targeting',
                'booking-url': '/docs#cta',
                'whatsapp-number': '/docs#cta',
                'linkedin-url': '/docs#cta',
                'instagram-url': '/docs#cta',
                'facebook-url': '/docs#cta',
                'youtube-url': '/docs#cta',
                'twitter-url': '/docs#cta',
                'website-url': '/docs#cta'
            };
            
            const docLink = docAnchors[helpKey] || '/docs';
            content += `<div class="mt-3 pt-3 border-top"><a href="${docLink}" target="_blank" class="help-link"><i class="bi bi-book"></i> View detailed documentation →</a></div>`;
        }
        
        document.getElementById('helpModalContent').innerHTML = content;

        const modalElement = document.getElementById('helpModal');
        if (!modalElement) {
            console.error('Help modal not found');
            alert('Help modal not found. Please refresh the page.');
            return;
        }
        
        const modal = new bootstrap.Modal(modalElement);
        modal.show();
    }

    // Handle client secret file upload
    document.getElementById('clientSecretUploadForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const fileInput = document.getElementById('clientSecretFile');
        const uploadBtn = document.getElementById('uploadClientSecretBtn');
        const statusDiv = document.getElementById('uploadStatus');

        if (!fileInput.files.length) {
            statusDiv.innerHTML = '<div class="alert alert-danger">Please select a file</div>';
            statusDiv.style.display = 'block';
            return;
        }

        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        uploadBtn.disabled = true;
        uploadBtn.innerHTML = '<i class="bi bi-hourglass-split"></i> Uploading...';
        statusDiv.style.display = 'none';

        fetch('/api/config/upload-client-secret', {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    statusDiv.innerHTML = '<div class="alert alert-success"><i class="bi bi-check-circle"></i> ' + data.message + '</div>';
                    statusDiv.style.display = 'block';
                    fileInput.value = '';

                    // Refresh page after 2 seconds to show updated status
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    statusDiv.innerHTML = '<div class="alert alert-danger"><i class="bi bi-x-circle"></i> Error: ' + (data.error || 'Upload failed') + '</div>';
                    statusDiv.style.display = 'block';
                }
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = '<i class="bi bi-upload"></i> Upload';
            })
            .catch(error => {
                statusDiv.innerHTML = '<div class="alert alert-danger"><i class="bi bi-x-circle"></i> Error: ' + error.message + '</div>';
                statusDiv.style.display = 'block';
                uploadBtn.disabled = false;
                uploadBtn.innerHTML = '<i class="bi bi-upload"></i> Upload';
            });
    });

    function testConnections() {
        const platforms = ['linkedin', 'facebook', 'instagram', 'ayrshare'];
        const results = [];

        platforms.forEach(platform => {
            fetch('/api/test-connection', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ platform: platform })
            })
                .then(response => response.json())
                .then(data => {
                    results.push({ platform: platform, ...data });
                    if (results.length === platforms.length) {
                        showTestResults(results);
                    }
                })
                .catch(error => {
                    results.push({ platform: platform, success: false, message: 'Error: ' + error });
                    if (results.length === platforms.length) {
                        showTestResults(results);
                    }
                });
        });
    }

    function showTestResults(results) {
        let message = 'Connection Test Results:\n\n';
        results.forEach(result => {
            const icon = result.success ? '✅' : '❌';
            message += `${icon} ${result.platform.toUpperCase()}: ${result.message}\n`;
        });
        alert(message);
    }

    // Section-specific save function with visual feedback
    function saveSection(section, button) {
        const btnText = button.querySelector('.btn-text');
        const originalText = btnText.textContent;
        const icon = button.querySelector('i');
        const originalIcon = icon.className;
        
        // Disable button and show loading
        button.disabled = true;
        button.classList.add('btn-saving');
        icon.className = 'bi bi-hourglass-split';
        btnText.textContent = 'Saving...';
        
        // Collect form data for this section
        const form = document.getElementById('configForm');
        const formData = {};
        
        if (section === 'api_keys') {
            formData.linkedin_client_id = form.querySelector('[name="linkedin_client_id"]').value;
            formData.linkedin_client_secret = form.querySelector('[name="linkedin_client_secret"]').value;
            formData.linkedin_access_token = form.querySelector('[name="linkedin_access_token"]').value;
            formData.linkedin_person_urn = form.querySelector('[name="linkedin_person_urn"]').value;
            formData.facebook_app_id = form.querySelector('[name="facebook_app_id"]').value;
            formData.facebook_app_secret = form.querySelector('[name="facebook_app_secret"]').value;
            formData.facebook_page_access_token = form.querySelector('[name="facebook_page_access_token"]').value;
            formData.facebook_page_id = form.querySelector('[name="facebook_page_id"]').value;
            formData.instagram_business_account_id = form.querySelector('[name="instagram_business_account_id"]').value;
            formData.instagram_access_token = form.querySelector('[name="instagram_access_token"]').value;
            formData.ayrshare_api_key = form.querySelector('[name="ayrshare_api_key"]').value;
        } else if (section === 'scheduling') {
            formData.scheduling_enabled = form.querySelector('[name="scheduling_enabled"]').checked;
            formData.videos_per_day = parseInt(form.querySelector('[name="videos_per_day"]').value) || 1;
            formData.youtube_schedule_time = form.querySelector('[name="youtube_schedule_time"]').value;
            formData.social_media_schedule_time = form.querySelector('[name="social_media_schedule_time"]').value;
            formData.schedule_day = form.querySelector('[name="schedule_day"]').value;
            formData.playlist_id = form.querySelector('[name="playlist_id"]').value;
            formData.export_type = form.querySelector('[name="export_type"]').value;
            formData.use_database = form.querySelector('[name="use_database"]').checked;
            formData.auto_post_social = form.querySelector('[name="auto_post_social"]').checked;
            formData.social_platforms = Array.from(form.querySelectorAll('[name="social_platforms"]:checked')).map(cb => cb.value);
            formData.upload_method = form.querySelector('[name="upload_method"]').value;
        } else if (section === 'social_media') {
            // Social media settings are part of scheduling
            formData.auto_post_social = form.querySelector('[name="auto_post_social"]').checked;
            formData.social_platforms = Array.from(form.querySelectorAll('[name="social_platforms"]:checked')).map(cb => cb.value);
            // Include all scheduling data since they're related
            formData.scheduling_enabled = form.querySelector('[name="scheduling_enabled"]').checked;
            formData.videos_per_day = parseInt(form.querySelector('[name="videos_per_day"]').value) || 1;
            formData.youtube_schedule_time = form.querySelector('[name="youtube_schedule_time"]').value;
            formData.social_media_schedule_time = form.querySelector('[name="social_media_schedule_time"]').value;
            formData.schedule_day = form.querySelector('[name="schedule_day"]').value;
            formData.playlist_id = form.querySelector('[name="playlist_id"]').value;
            formData.export_type = form.querySelector('[name="export_type"]').value;
            formData.use_database = form.querySelector('[name="use_database"]').checked;
            formData.upload_method = form.querySelector('[name="upload_method"]').value;
            section = 'scheduling'; // Save as scheduling section
        } else if (section === 'thresholds') {
            formData.linkedin_daily_limit = parseInt(form.querySelector('[name="linkedin_daily_limit"]').value) || 25;
            formData.facebook_daily_limit = parseInt(form.querySelector('[name="facebook_daily_limit"]').value) || 25;
            formData.instagram_daily_limit = parseInt(form.querySelector('[name="instagram_daily_limit"]').value) || 25;
            formData.youtube_daily_limit = parseInt(form.querySelector('[name="youtube_daily_limit"]').value) || 10;
        } else if (section === 'targeting') {
            formData.target_audience = form.querySelector('[name="target_audience"]').value;
            formData.interview_types = Array.from(form.querySelectorAll('[name="interview_types"]:checked')).map(cb => cb.value);
            formData.role_levels = Array.from(form.querySelectorAll('[name="role_levels"]:checked')).map(cb => cb.value);
        }
        
        // Create save indicator
        let saveIndicator = document.getElementById('save-indicator');
        if (!saveIndicator) {
            saveIndicator = document.createElement('div');
            saveIndicator.id = 'save-indicator';
            saveIndicator.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 9999; min-width: 300px; max-width: 400px;';
            document.body.appendChild(saveIndicator);
        }
        
        // Send AJAX request
        fetch('/api/config/save-section', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                section: section,
                data: formData
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Success feedback
                icon.className = 'bi bi-check-circle';
                btnText.textContent = 'Saved!';
                button.classList.remove('btn-primary', 'btn-saving');
                button.classList.add('btn-success');
                
                // Show success message
                saveIndicator.innerHTML = `
                    <div class="alert alert-success alert-dismissible fade show shadow" role="alert">
                        <i class="bi bi-check-circle"></i> <strong>Success!</strong> ${data.message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" onclick="document.getElementById('save-indicator').remove()"></button>
                    </div>
                `;
                
                // Auto-dismiss after 3 seconds
                setTimeout(() => {
                    if (saveIndicator && saveIndicator.parentElement) {
                        saveIndicator.remove();
                    }
                }, 3000);
                
                // Reset button after 2 seconds
                setTimeout(() => {
                    icon.className = originalIcon;
                    btnText.textContent = originalText;
                    button.classList.remove('btn-success');
                    button.classList.add('btn-primary');
                    button.disabled = false;
                }, 2000);
            } else {
                // Error feedback
                icon.className = 'bi bi-x-circle';
                btnText.textContent = 'Error';
                button.classList.remove('btn-primary', 'btn-saving');
                button.classList.add('btn-danger');
                
                // Show error message
                saveIndicator.innerHTML = `
                    <div class="alert alert-danger alert-dismissible fade show shadow" role="alert">
                        <i class="bi bi-exclamation-triangle"></i> <strong>Error!</strong> ${data.error || 'Failed to save'}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" onclick="document.getElementById('save-indicator').remove()"></button>
                    </div>
                `;
                
                // Auto-dismiss after 5 seconds
                setTimeout(() => {
                    if (saveIndicator && saveIndicator.parentElement) {
                        saveIndicator.remove();
                    }
                }, 5000);
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    icon.className = originalIcon;
                    btnText.textContent = originalText;
                    button.classList.remove('btn-danger');
                    button.classList.add('btn-primary');
                    button.disabled = false;
                }, 3000);
            }
        })
        .catch(error => {
            // Network error
            icon.className = 'bi bi-x-circle';
            btnText.textContent = 'Error';
            button.classList.remove('btn-primary', 'btn-saving');
            button.classList.add('btn-danger');
            
            saveIndicator.innerHTML = `
                <div class="alert alert-danger alert-dismissible fade show shadow" role="alert">
                    <i class="bi bi-exclamation-triangle"></i> <strong>Network Error!</strong> ${error.message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" onclick="document.getElementById('save-indicator').remove()"></button>
                </div>
            `;
            
            setTimeout(() => {
                if (saveIndicator && saveIndicator.parentElement) {
                    saveIndicator.remove();
                }
            }, 5000);
            
            setTimeout(() => {
                icon.className = originalIcon;
                btnText.textContent = originalText;
                button.classList.remove('btn-danger');
                button.classList.add('btn-primary');
                button.disabled = false;
            }, 3000);
        });
    }

    // Auto-save functionality
    let autoSaveTimeouts = {};
    let autoSaveSections = {
        'api_keys': ['linkedin_client_id', 'linkedin_client_secret', 'linkedin_access_token', 'linkedin_person_urn', 
                     'facebook_app_id', 'facebook_app_secret', 'facebook_page_access_token', 'facebook_page_id',
                     'instagram_business_account_id', 'instagram_access_token', 'ayrshare_api_key'],
        'scheduling': ['scheduling_enabled', 'videos_per_day', 'schedule_day', 'youtube_schedule_time', 
                      'social_media_schedule_time', 'playlist_id', 'export_type', 'use_database', 
                      'auto_post_social', 'upload_method'],
        'social_platforms': ['social_platforms'],
        'thresholds': ['linkedin_daily_limit', 'facebook_daily_limit', 'instagram_daily_limit', 'youtube_daily_limit'],
        'targeting': ['target_audience', 'interview_types', 'role_levels'],
        'cta': ['booking_url', 'whatsapp_number', 'linkedin_url', 'instagram_url', 'facebook_url', 'youtube_url', 'twitter_url', 'website_url']
    };

    // Map inputs to their sections
    function getSectionForInput(inputName) {
        for (const [section, fields] of Object.entries(autoSaveSections)) {
            if (fields.includes(inputName) || inputName.startsWith('social_platforms') || 
                inputName.startsWith('interview_types') || inputName.startsWith('role_levels')) {
                return section;
            }
        }
        // Default mapping
        if (inputName.includes('linkedin') || inputName.includes('facebook') || 
            inputName.includes('instagram') || inputName.includes('ayrshare')) {
            return 'api_keys';
        }
        if (inputName.includes('limit') || inputName.includes('threshold')) {
            return 'thresholds';
        }
        if (inputName.includes('audience') || inputName.includes('interview') || inputName.includes('role')) {
            return 'targeting';
        }
        return 'scheduling';
    }

    // Auto-save function
    function autoSave(section, inputName) {
        // Clear existing timeout for this section
        if (autoSaveTimeouts[section]) {
            clearTimeout(autoSaveTimeouts[section]);
        }

        // Show saving indicator
        showAutoSaveIndicator(section, 'saving');

        // Set new timeout (2 seconds after user stops typing)
        autoSaveTimeouts[section] = setTimeout(() => {
            // Get the save button for this section
            const sectionCards = document.querySelectorAll('.card');
            let saveButton = null;
            
            for (const card of sectionCards) {
                const button = card.querySelector(`button[onclick*="saveSection('${section}'"]`);
                if (button) {
                    saveButton = button;
                    break;
                }
            }

            // Trigger auto-save (silent)
            autoSaveSection(section);
        }, 2000); // 2 second delay
    }

    // Show auto-save indicator
    function showAutoSaveIndicator(section, status) {
        // Remove existing indicator
        const existing = document.getElementById(`auto-save-indicator-${section}`);
        if (existing) {
            existing.remove();
        }

        // Create indicator
        const indicator = document.createElement('div');
        indicator.id = `auto-save-indicator-${section}`;
        indicator.className = 'auto-save-indicator';
        
        if (status === 'saving') {
            indicator.innerHTML = '<i class="bi bi-hourglass-split"></i> Saving...';
            indicator.className += ' saving';
        } else if (status === 'saved') {
            indicator.innerHTML = '<i class="bi bi-check-circle"></i> Saved';
            indicator.className += ' saved';
        }

        // Find the section card and append indicator
        const sectionCards = document.querySelectorAll('.card');
        for (const card of sectionCards) {
            const button = card.querySelector(`button[onclick*="saveSection('${section}'"]`);
            if (button) {
                const cardHeader = card.querySelector('.card-header');
                if (cardHeader) {
                    cardHeader.appendChild(indicator);
                    break;
                }
            }
        }

        // Auto-remove after 3 seconds if saved
        if (status === 'saved') {
            setTimeout(() => {
                if (indicator.parentElement) {
                    indicator.remove();
                }
            }, 3000);
        }
    }

    // Attach auto-save listeners to all inputs
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('configForm');
        if (!form) return;

        // Add event listeners to all inputs
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            const inputName = input.name || input.id;
            if (!inputName) return;

            // Skip file inputs
            if (input.type === 'file') return;

            // Determine section
            const section = getSectionForInput(inputName);

            // Add event listeners
            if (input.type === 'checkbox' || input.type === 'radio') {
                input.addEventListener('change', () => {
                    autoSave(section, inputName);
                });
            } else {
                input.addEventListener('input', () => {
                    autoSave(section, inputName);
                });
            }
        });

        // Also handle checkboxes for social platforms, interview types, role levels
        const checkboxes = form.querySelectorAll('input[type="checkbox"][name^="social_platforms"], input[type="checkbox"][name^="interview_types"], input[type="checkbox"][name^="role_levels"]');
        checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const section = getSectionForInput(cb.name);
                autoSave(section, cb.name);
            });
        });
    });

    // Auto-save function (silent save without button animation)
    function autoSaveSection(section) {
        const form = document.getElementById('configForm');
        if (!form) return;
        
        const formData = {};
        
        // Collect form data (same logic as saveSection)
        if (section === 'api_keys') {
            const inputs = form.querySelectorAll('[name^="linkedin_"], [name^="facebook_"], [name^="instagram_"], [name="ayrshare_api_key"]');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    formData[input.name] = input.checked;
                } else {
                    formData[input.name] = input.value || '';
                }
            });
        } else if (section === 'scheduling') {
            formData.scheduling_enabled = form.querySelector('[name="scheduling_enabled"]')?.checked || false;
            formData.videos_per_day = parseInt(form.querySelector('[name="videos_per_day"]')?.value) || 1;
            formData.youtube_schedule_time = form.querySelector('[name="youtube_schedule_time"]')?.value || '';
            formData.social_media_schedule_time = form.querySelector('[name="social_media_schedule_time"]')?.value || '';
            formData.schedule_day = form.querySelector('[name="schedule_day"]')?.value || 'wednesday';
            formData.playlist_id = form.querySelector('[name="playlist_id"]')?.value || '';
            formData.export_type = form.querySelector('[name="export_type"]')?.value || 'shorts';
            formData.use_database = form.querySelector('[name="use_database"]')?.checked || true;
            formData.auto_post_social = form.querySelector('[name="auto_post_social"]')?.checked || false;
            formData.social_platforms = Array.from(form.querySelectorAll('[name="social_platforms"]:checked')).map(cb => cb.value);
            formData.upload_method = form.querySelector('[name="upload_method"]')?.value || 'native';
        } else if (section === 'social_media') {
            formData.auto_post_social = form.querySelector('[name="auto_post_social"]')?.checked || false;
            formData.social_platforms = Array.from(form.querySelectorAll('[name="social_platforms"]:checked')).map(cb => cb.value);
            formData.scheduling_enabled = form.querySelector('[name="scheduling_enabled"]')?.checked || false;
            formData.videos_per_day = parseInt(form.querySelector('[name="videos_per_day"]')?.value) || 1;
            formData.youtube_schedule_time = form.querySelector('[name="youtube_schedule_time"]')?.value || '';
            formData.social_media_schedule_time = form.querySelector('[name="social_media_schedule_time"]')?.value || '';
            formData.schedule_day = form.querySelector('[name="schedule_day"]')?.value || 'wednesday';
            formData.playlist_id = form.querySelector('[name="playlist_id"]')?.value || '';
            formData.export_type = form.querySelector('[name="export_type"]')?.value || 'shorts';
            formData.use_database = form.querySelector('[name="use_database"]')?.checked || true;
            formData.upload_method = form.querySelector('[name="upload_method"]')?.value || 'native';
            section = 'scheduling';
        } else if (section === 'thresholds') {
            formData.linkedin_daily_limit = parseInt(form.querySelector('[name="linkedin_daily_limit"]')?.value) || 25;
            formData.facebook_daily_limit = parseInt(form.querySelector('[name="facebook_daily_limit"]')?.value) || 25;
            formData.instagram_daily_limit = parseInt(form.querySelector('[name="instagram_daily_limit"]')?.value) || 25;
            formData.youtube_daily_limit = parseInt(form.querySelector('[name="youtube_daily_limit"]')?.value) || 10;
        } else if (section === 'targeting') {
            formData.target_audience = form.querySelector('[name="target_audience"]')?.value || 'usa_professionals';
            formData.interview_types = Array.from(form.querySelectorAll('[name="interview_types"]:checked')).map(cb => cb.value);
            formData.role_levels = Array.from(form.querySelectorAll('[name="role_levels"]:checked')).map(cb => cb.value);
        } else if (section === 'cta') {
            formData.booking_url = form.querySelector('[name="booking_url"]')?.value || 'https://fullstackmaster/book';
            formData.whatsapp_number = form.querySelector('[name="whatsapp_number"]')?.value || '+1-609-442-4081';
            formData.linkedin_url = form.querySelector('[name="linkedin_url"]')?.value || '';
            formData.instagram_url = form.querySelector('[name="instagram_url"]')?.value || '';
            formData.facebook_url = form.querySelector('[name="facebook_url"]')?.value || '';
            formData.youtube_url = form.querySelector('[name="youtube_url"]')?.value || '';
            formData.twitter_url = form.querySelector('[name="twitter_url"]')?.value || '';
            formData.website_url = form.querySelector('[name="website_url"]')?.value || '';
        }

        // Save silently
        fetch('/api/config/save-section', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ section: section, data: formData })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showAutoSaveIndicator(section, 'saved');
            } else {
                console.error('Auto-save failed:', data.error);
            }
        })
        .catch(error => {
            console.error('Auto-save error:', error);
        });
    }
</script>
{% endblock %}